<!DOCTYPE html>
<html lang="ar" dir="rtl" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https: 'unsafe-inline' 'unsafe-eval'; img-src 'self' data: https:; frame-src https:;">

    <title>Syriabest | سوريا بست - مشاهدة أحدث الأفلام والمسلسلات</title>
    <meta name="description" content="موقع سوريا بست Syriabest لمشاهدة أحدث الأفلام والمسلسلات العربية والأجنبية، سلاسل أفلام مارفل، أفلام الرعب، والأكشن بجودة عالية وسيرفرات سريعة.">
    <meta name="keywords" content="Syriabest, سوريا بست, مشاهدة افلام, مسلسلات حصريا, افلام مارفل, افلام رعب, افلام اكشن, افلام 2026, مصطفى بربور">
    <meta name="author" content="Mostafa Barbour">
    <meta name="robots" content="index, follow">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#e50914">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Syriabest">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon-192.png">

    <meta property="og:title" content="Syriabest | عالم الترفيه بين يديك">
    <meta property="og:description" content="استمتع بمشاهدة أحدث الأفلام والمسلسلات على Syriabest بأعلى جودة.">
    <meta property="og:url" content="https://syriabest.com">
    <meta property="og:type" content="website">

    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Syriabest",
      "url": "https://syriabest.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://syriabest.com/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --main-red: #e50914;
            --dark-bg: #141414;
            --card-bg: #1f1f1f;
            --gray-text: #a3a3a3;
            --overlay-bg: rgba(0, 0, 0, 0.9);
            --glass-bg: rgba(20, 20, 20, 0.75);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
            scroll-behavior: smooth;
            -webkit-user-select: none;
            user-select: none;
        }

        body {
            background-color: var(--dark-bg);
            color: #fff;
            overflow-x: hidden;
            line-height: 1.6;
        }

        header {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 2000;
            display: flex !important;
            justify-content: space-between;
            align-items: center;
            padding: 15px 5%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9), transparent);
            transition: 0.4s;
        }

        header.scrolled {
            background-color: #000;
            padding: 10px 5%;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .logo {
            color: var(--main-red);
            font-size: clamp(24px, 5vw, 32px);
            font-weight: 900;
            text-decoration: none;
            text-transform: uppercase;
            text-shadow: 0 0 20px rgba(229, 9, 20, 0.5);
            animation: logoGlow 3s ease-in-out infinite;
        }

        @keyframes logoGlow {
            0%, 100% { text-shadow: 0 0 20px rgba(229, 9, 20, 0.5); }
            50% { text-shadow: 0 0 30px rgba(229, 9, 20, 0.8), 0 0 40px rgba(229, 9, 20, 0.6); }
        }

        .nav-links {
            display: flex !important;
            list-style: none;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            color: #e5e5e5;
            text-decoration: none;
            font-size: 15px;
            font-weight: 600;
            transition: 0.3s;
            position: relative;
        }

        .nav-links a:hover { 
            color: var(--main-red);
            transform: translateY(-2px);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--main-red);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .genre-dropdown {
            position: relative;
        }

        .genre-btn {
            background: transparent;
            color: #e5e5e5;
            border: none;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            transition: 0.3s;
        }

        .genre-btn:hover {
            color: var(--main-red);
        }

        .genre-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            min-width: 200px;
            border-radius: 8px;
            padding: 10px 0;
            display: none;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8);
            border: 1px solid #333;
            margin-top: 10px;
            backdrop-filter: blur(10px);
            z-index: 3000;
        }

        .genre-menu.active {
            display: block !important;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .genre-menu a {
            display: block;
            padding: 12px 20px;
            color: #e5e5e5;
            text-decoration: none;
            font-size: 14px;
            transition: 0.3s;
        }

        .genre-menu a:hover {
            background: var(--main-red);
            color: #fff;
            padding-right: 25px;
        }

        .lang-switcher {
            background: rgba(255,255,255,0.1);
            border: 1px solid #444;
            color: #fff;
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: 0.3s;
            display: flex !important;
            align-items: center;
            gap: 5px;
        }

        .lang-switcher:hover {
            background: var(--main-red);
            border-color: var(--main-red);
            transform: scale(1.05);
        }

        .nav-actions {
            display: flex !important;
            align-items: center;
            gap: 15px;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .search-container {
            position: relative;
            display: flex !important;
            align-items: center;
        }

        .search-input {
            background: rgba(255,255,255,0.1);
            border: 1px solid #444;
            color: #fff;
            padding: 5px 10px;
            border-radius: 20px;
            outline: none;
            width: 150px;
            font-size: 13px;
            transition: 0.3s;
        }
        .search-input:focus { 
            width: 200px; 
            border-color: var(--main-red);
            box-shadow: 0 0 10px rgba(229, 9, 20, 0.3);
        }

        .btn-auth {
            background: linear-gradient(135deg, #e50914, #b20710);
            color: #fff;
            padding: 7px 18px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            font-size: 14px;
            border: none;
            cursor: pointer;
            white-space: nowrap;
            transition: 0.3s;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
            display: inline-block !important;
        }

        .btn-auth:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.5);
        }

        .notification-btn {
            position: relative;
            background: rgba(255,255,255,0.1);
            border: 1px solid #444;
            color: #fff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex !important;
            align-items: center;
            justify-content: center;
            transition: 0.3s;
        }

        .notification-btn:hover {
            background: var(--main-red);
            border-color: var(--main-red);
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--main-red);
            color: #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: bold;
        }

        .mobile-menu-btn {
            display: none;
            font-size: 24px;
            cursor: pointer;
            color: #fff;
        }

        /* PWA Install Button */
        .pwa-install-container {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1500;
            display: none;
        }

        .pwa-install-btn {
            background: linear-gradient(135deg, #e50914, #b20710);
            color: #fff;
            padding: 15px 30px;
            border-radius: 50px;
            border: none;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(229, 9, 20, 0.5);
            display: flex;
            align-items: center;
            gap: 10px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .pwa-install-btn:hover {
            transform: scale(1.1);
        }

        .hero {
            height: 85vh;
            width: 100%;
            position: relative;
            background: linear-gradient(to top, var(--dark-bg) 10%, transparent 40%),
                        linear-gradient(to left, rgba(0,0,0,0.7), transparent),
                        url('hero-bg.jpg');
            background-size: cover;
            background-position: center center;
            display: flex;
            align-items: center;
            padding: 0 5%;
            overflow: hidden;
        }

        .hero-watermark {
            position: absolute;
            right: -5%;
            top: 50%;
            transform: translateY(-50%) rotate(-15deg);
            font-size: clamp(100px, 20vw, 250px);
            font-weight: 900;
            color: var(--main-red);
            opacity: 0.12;
            pointer-events: none;
            z-index: 1;
            font-style: italic;
            text-transform: uppercase;
            white-space: nowrap;
            filter: blur(1px);
        }

        .hero-content {
            position: relative;
            z-index: 10;
            max-width: 700px;
            margin-top: 50px;
            animation: fadeInUp 1s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .hero-content h1 {
            font-size: clamp(32px, 8vw, 64px);
            margin-bottom: 15px;
            line-height: 1.1;
        }

        .hero-content p {
            font-size: clamp(14px, 3vw, 19px);
            color: #ddd;
            margin-bottom: 25px;
            max-width: 550px;
        }

        .series-banner {
            width: 90%;
            margin: 40px auto;
            background: linear-gradient(135deg, #800000, #e50914, #ff3d47, #e50914, #800000);
            background-size: 200% 200%;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(229, 9, 20, 0.3);
            border: 2px solid rgba(255,255,255,0.1);
            animation: gradientShift 5s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .series-banner h2 {
            font-size: clamp(22px, 5vw, 36px);
            font-weight: 800;
            color: #fff;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.5);
            letter-spacing: 1px;
        }

        .hero-btns {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-hero {
            padding: 12px 28px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: 0.3s;
        }

        .btn-play { 
            background-color: #fff; 
            color: #000;
            box-shadow: 0 4px 15px rgba(255,255,255,0.3);
        }
        .btn-play:hover { 
            background-color: #bfbfbf;
            transform: scale(1.05);
        }
        .btn-more { 
            background-color: rgba(109, 109, 110, 0.7); 
            color: #fff;
            backdrop-filter: blur(10px);
        }
        .btn-more:hover { 
            background-color: rgba(109, 109, 110, 0.5);
            transform: scale(1.05);
        }

        .content-area {
            margin-top: -80px;
            padding-bottom: 50px;
        }

        .row {
            padding: 20px 5%;
        }

        .row-title {
            font-size: clamp(18px, 4vw, 24px);
            margin-bottom: 15px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .row-title a {
            font-size: 13px;
            color: var(--main-red);
            text-decoration: none;
            transition: 0.3s;
        }

        .row-title a:hover {
            color: #ff3d47;
            text-decoration: underline;
        }

        .movie-slider {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding: 15px 0;
            scrollbar-width: none;
        }

        .movie-slider::-webkit-scrollbar { display: none; }

        .movie-card {
            min-width: clamp(160px, 25vw, 240px);
            aspect-ratio: 2/3;
            background-color: var(--card-bg);
            border-radius: 6px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .movie-card:hover {
            transform: scale(1.05);
            z-index: 100;
            box-shadow: 0 10px 25px rgba(0,0,0,0.6), 0 0 20px rgba(229, 9, 20, 0.5);
            border: 2px solid var(--main-red);
        }

        .movie-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(transparent, rgba(0,0,0,0.9));
            opacity: 0;
            transition: 0.3s;
            gap: 5px;
        }
        .card-overlay i { font-size: 40px; color: #fff; }
        .card-overlay i.fa-lock { color: #ffcc00; }
        .card-overlay span { font-size: 14px; font-weight: bold; padding: 0 10px; text-align: center; }

        .movie-card:hover .card-overlay { opacity: 1; }

        .fav-btn-card {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.6);
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            z-index: 110;
            transition: 0.3s;
        }
        .fav-btn-card.active { color: var(--main-red); }
        .fav-btn-card:hover { transform: scale(1.2); background: #000; }

        .fav-status-btn {
            background: #333;
            color: #fff;
            padding: 8px 15px;
            border-radius: 5px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: 0.3s;
        }
        .fav-status-btn.active { background: var(--main-red); }
        .fav-status-btn:hover { transform: scale(1.05); }

        #searchOverlay {
            display: none; position: fixed; inset: 0; background: var(--dark-bg);
            z-index: 4000; padding: 100px 5% 50px; overflow-y: auto;
        }
        .verified-badge { color: #1da1f2; margin-right: 5px; font-size: 0.9em; }
        
        #accountSection {
            display: none; position: fixed; inset: 0; background: var(--dark-bg);
            z-index: 3500; padding: 60px 5%; overflow-y: auto;
        }
        .account-box {
            background: var(--card-bg); max-width: 800px; margin: 0 auto;
            padding: 40px; border-radius: 15px; border: 1px solid #333;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }

        /* تصغير حجم الصور في صفحة حسابي */
        #favoritesGrid .movie-card {
            min-width: 120px !important;
            max-width: 120px !important;
            height: 180px !important;
        }

        #favoritesGrid .movie-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .rating-area { 
            padding: 50px 5%; 
            background: linear-gradient(135deg, #000, #1a1a1a); 
            text-align: center; 
            border-top: 1px solid #222; 
        }
        .rating-area textarea { 
            width: 100%; max-width: 600px; background: #222; border: 1px solid #444; 
            color: #fff; padding: 15px; border-radius: 8px; margin: 20px 0; font-family: inherit;
            transition: 0.3s;
        }
        .rating-area textarea:focus {
            border-color: var(--main-red);
            box-shadow: 0 0 10px rgba(229, 9, 20, 0.3);
        }

        .video-popup {
            display: none;
            position: fixed;
            inset: 0;
            background: var(--overlay-bg);
            z-index: 5000;
            justify-content: flex-start;
            align-items: center;
            flex-direction: column;
            overflow-y: auto;
            padding: 20px 0;
        }
        
        .video-wrapper {
            width: 90%;
            max-width: 1000px;
            position: relative;
            background: #000;
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            border: 1px solid #333;
        }

        .server-bar {
            width: 90%;
            max-width: 1000px;
            background: #222;
            padding: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
            border-bottom: 2px solid var(--main-red);
            border-radius: 8px 8px 0 0;
        }

        .server-btn {
            background: #333;
            color: #fff;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: bold;
            border-radius: 4px;
            transition: 0.3s;
        }

        .server-btn.active { background: var(--main-red); }
        .server-btn:hover { background: #444; transform: scale(1.05); }

        .video-wrapper iframe {
            width: 100%;
            aspect-ratio: 16/9;
        }

        .series-controls {
            width: 90%;
            max-width: 1000px;
            background: #1a1a1a;
            margin-top: 15px;
            padding: 20px;
            border-radius: 8px;
            display: none;
        }

        .control-group { margin-bottom: 20px; }
        .control-group h4 { color: var(--main-red); margin-bottom: 10px; font-size: 16px; border-right: 3px solid var(--main-red); padding-right: 10px; }
        
        .btn-grid {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .ep-btn {
            background: #262626;
            color: #fff;
            border: 1px solid #444;
            padding: 6px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: 0.2s;
        }

        .ep-btn:hover { background: #333; transform: scale(1.05); }
        .ep-btn.active { background: var(--main-red); border-color: var(--main-red); }

        .close-video {
            align-self: flex-end;
            margin-bottom: 10px;
            margin-right: 5%;
            color: #fff;
            font-size: 30px;
            cursor: pointer;
            background: rgba(255,255,255,0.1);
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: 0.3s;
        }

        .close-video:hover {
            background: var(--main-red);
            transform: rotate(90deg);
        }

        .auth-modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .modal-box {
            background: var(--glass-bg) !important;
            backdrop-filter: blur(20px);
            width: 100%;
            max-width: 400px;
            padding: 40px;
            border-radius: 20px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            transition: all 0.3s ease;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            left: 20px;
            cursor: pointer;
            font-size: 20px;
            color: var(--gray-text);
            transition: 0.3s;
        }

        .close-modal:hover {
            color: var(--main-red);
            transform: rotate(90deg);
        }

        .modal-box h2 { 
            margin-bottom: 30px; 
            text-align: center; 
            font-weight: 800; 
            letter-spacing: 1px;
            color: var(--main-red);
        }

        .input-group { margin-bottom: 20px; }
        .input-group input {
            width: 100%;
            padding: 14px;
            background: rgba(255,255,255,0.05) !important;
            border: 2px solid transparent;
            border-radius: 12px;
            color: #fff;
            outline: none;
            transition: all 0.4s ease;
        }

        .input-group input:focus {
            border-color: var(--main-red);
            box-shadow: 0 0 15px rgba(229, 9, 20, 0.3);
            background: rgba(255,255,255,0.1) !important;
        }

        .btn-submit {
            width: 100%;
            padding: 14px;
            background: linear-gradient(45deg, #e50914, #ff3d47) !important;
            color: #fff;
            border: none;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            font-size: 16px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .btn-submit:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(229, 9, 20, 0.4);
        }

        .loader {
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top: 3px solid #fff;
            border-radius: 50%;
            display: none;
            animation: spin 0.8s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .auth-footer-link {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: var(--gray-text);
            cursor: pointer;
            transition: 0.3s;
        }
        .auth-footer-link:hover { color: #fff; }
        .auth-footer-link span { color: var(--main-red); font-weight: bold; }

        .hp-field { display: none !important; }

        /* Math CAPTCHA Styles */
        .captcha-box {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .captcha-question {
            font-size: 18px;
            color: #fff;
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .captcha-input {
            width: 100%;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border: 2px solid #444;
            border-radius: 8px;
            color: #fff;
            text-align: center;
            font-size: 16px;
            outline: none;
        }

        .captcha-input:focus {
            border-color: var(--main-red);
            box-shadow: 0 0 10px rgba(229, 9, 20, 0.3);
        }

        /* Notifications Panel */
        #notificationsPanel {
            display: none;
            position: fixed;
            top: 70px;
            right: 5%;
            width: 350px;
            max-height: 500px;
            background: var(--card-bg);
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.8);
            border: 1px solid #333;
            z-index: 3000;
            overflow-y: auto;
        }

        .notification-header {
            padding: 20px;
            border-bottom: 1px solid #333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .notification-header h3 {
            color: var(--main-red);
            font-size: 18px;
        }

        .notification-item {
            padding: 15px 20px;
            border-bottom: 1px solid #222;
            transition: 0.3s;
        }

        .notification-item:hover {
            background: rgba(229, 9, 20, 0.1);
        }

        .notification-item.unread {
            background: rgba(229, 9, 20, 0.05);
        }

        .notification-time {
            font-size: 11px;
            color: var(--gray-text);
            margin-top: 5px;
        }

        /* About Modal */
        #aboutModal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.85);
            z-index: 4000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(5px);
        }

        .about-box {
            background: var(--card-bg);
            max-width: 600px;
            padding: 40px;
            border-radius: 20px;
            border: 1px solid #333;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            position: relative;
        }

        .about-box h2 {
            color: var(--main-red);
            margin-bottom: 20px;
            text-align: center;
        }

        .about-box p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #ddd;
        }

        @media (max-width: 768px) {
            header { padding: 15px 4%; }
            .nav-links { display: none !important; }
            .mobile-menu-btn { display: block !important; }
            .hero { height: 70vh; }
            .hero-content h1 { font-size: 38px; }
            .content-area { margin-top: -40px; }
            .nav-actions { gap: 8px; }
            .btn-auth { padding: 5px 12px; font-size: 12px; }
            .hero-watermark { font-size: 100px; right: -10%; }
            #favoritesGrid .movie-card {
                min-width: 100px !important;
                max-width: 100px !important;
                height: 150px !important;
            }
            #notificationsPanel {
                right: 2%;
                width: 90%;
            }
        }

        #dmcaSection { display: none; padding: 100px 10%; background: var(--dark-bg); min-height: 80vh; }

        footer {
            padding: 60px 5% 30px;
            background: linear-gradient(to top, #000, #0a0a0a);
            text-align: center;
            border-top: 1px solid #222;
        }

        .footer-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 30px; margin-bottom: 40px; text-align: right;
        }

        .footer-grid ul { list-style: none; }
        .footer-grid li { margin-bottom: 10px; }
        .footer-grid a { 
            color: var(--gray-text); 
            text-decoration: none; 
            font-size: 13px;
            transition: 0.3s;
        }
        .footer-grid a:hover { 
            text-decoration: underline;
            color: var(--main-red);
        }

        .copyright { 
            color: var(--gray-text); 
            font-size: 12px;
            margin-top: 20px;
        }

        .version-tag {
            display: inline-block;
            background: var(--main-red);
            color: #fff;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
            margin-top: 10px;
            letter-spacing: 1px;
        }

    </style>
</head>
<body oncontextmenu="return false;"> 
    
    <header id="mainNav">
        <div style="display: flex; align-items: center; gap: 20px;">
            <i class="fas fa-bars mobile-menu-btn" onclick="toggleMobileMenu()"></i>
            <a href="#" class="logo" onclick="location.reload()">Syriabest</a>
            <ul class="nav-links">
                <li><a href="#" onclick="location.reload()" data-translate="nav_home">الرئيسية</a></li>
                <li><a href="#row-foreign-series" data-translate="nav_series">مسلسلات</a></li>
                <li><a href="#row-action" data-translate="nav_movies">أفلام</a></li>
                <li class="genre-dropdown">
                    <button class="genre-btn" onclick="toggleGenreMenu()">
                        <span data-translate="nav_genres">الفئات</span>
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="genre-menu" id="genreMenu">
                        <a href="#row-marvel" data-translate="genre_marvel">مارفل</a>
                        <a href="#row-action" data-translate="genre_action">أكشن</a>
                        <a href="#row-comedy" data-translate="genre_comedy">كوميدي</a>
                        <a href="#row-horror" data-translate="genre_horror">رعب</a>
                        <a href="#row-thriller" data-translate="genre_thriller">إثارة وغموض</a>
                    </div>
                </li>
                <li><a href="#" onclick="showDMCA()" data-translate="nav_dmca">DMCA / حقوق النشر</a></li>
            </ul>
        </div>
        
        <div class="nav-actions">
            <button class="lang-switcher" onclick="toggleLanguage()">
                <i class="fas fa-globe"></i>
                <span id="currentLang">EN</span>
            </button>
            
            <button class="notification-btn" onclick="toggleNotifications()" id="notifBtn">
                <i class="fas fa-bell"></i>
                <span class="notification-badge" id="notifBadge" style="display: none;">0</span>
            </button>
            
            <div class="search-container">
                <form onsubmit="handleSearch(event)">
                    <input type="text" id="globalSearch" class="search-input" data-translate-placeholder="search_placeholder" placeholder="ابحث...">
                </form>
            </div>
            
            <button class="btn-auth" id="mainAuthBtn" onclick="toggleModal(true)" data-translate="btn_login">دخول</button>
        </div>
    </header>

    <!-- PWA Install Button -->
    <div class="pwa-install-container" id="pwaInstallContainer">
        <button class="pwa-install-btn" id="pwaInstallBtn">
            <i class="fas fa-download"></i>
            <span data-translate="pwa_install">تنزيل التطبيق</span>
        </button>
    </div>

    <!-- Notifications Panel -->
    <div id="notificationsPanel">
        <div class="notification-header">
            <h3 data-translate="notif_title">الإشعارات</h3>
            <i class="fas fa-times" onclick="toggleNotifications()" style="cursor: pointer; color: var(--gray-text);"></i>
        </div>
        <div id="notificationsList">
            <p style="padding: 20px; text-align: center; color: var(--gray-text);" data-translate="notif_empty">لا توجد إشعارات جديدة</p>
        </div>
    </div>

    <!-- About Modal -->
    <div id="aboutModal">
        <div class="about-box">
            <i class="fas fa-times close-modal" onclick="closeAbout()"></i>
            <h2 data-translate="about_title">معلومات عن الموقع</h2>
            <p data-translate="about_p1">مرحباً بك في <strong style="color: var(--main-red);">Syriabest</strong> - وجهتك الأولى لمشاهدة أحدث الأفلام والمسلسلات العربية والأجنبية بأعلى جودة!</p>
            <p data-translate="about_p2">نقدم لك تجربة مشاهدة فريدة مع:</p>
            <ul style="list-style: none; padding: 0; margin: 20px 0;">
                <li style="padding: 10px 0; border-bottom: 1px solid #333;"><i class="fas fa-check" style="color: var(--main-red); margin-left: 10px;"></i> <span data-translate="about_feature1">سيرفرات متعددة وسريعة</span></li>
                <li style="padding: 10px 0; border-bottom: 1px solid #333;"><i class="fas fa-check" style="color: var(--main-red); margin-left: 10px;"></i> <span data-translate="about_feature2">جودة عالية HD</span></li>
                <li style="padding: 10px 0; border-bottom: 1px solid #333;"><i class="fas fa-check" style="color: var(--main-red); margin-left: 10px;"></i> <span data-translate="about_feature3">تحديثات يومية</span></li>
                <li style="padding: 10px 0; border-bottom: 1px solid #333;"><i class="fas fa-check" style="color: var(--main-red); margin-left: 10px;"></i> <span data-translate="about_feature4">مكتبة ضخمة من المحتوى</span></li>
                <li style="padding: 10px 0;"><i class="fas fa-check" style="color: var(--main-red); margin-left: 10px;"></i> <span data-translate="about_feature5">دعم فني 24/7</span></li>
            </ul>
            <p data-translate="about_p3">تم تطوير الموقع بواسطة <strong style="color: var(--main-red);">Mostafa Barbour</strong></p>
            <button class="btn-auth" onclick="closeAbout()" style="width: 100%; margin-top: 20px;" data-translate="btn_close">إغلاق</button>
        </div>
    </div>

    <div id="dmcaSection">
        <h1 style="color: var(--main-red); margin-bottom: 20px;" data-translate="dmca_title">DMCA - سياسة حقوق النشر</h1>
        <p data-translate="dmca_text">موقع <strong>Syriabest</strong> هو محرك بحث للمحتوى الترفيهي. نحن لا نقوم برفع أو استضافة أي فيديوهات على خوادمنا الخاصة. جميع الروابط يتم جلبها من مواقع خارجية. إذا كنت صاحب حق وتريد إزالة محتوى، يرجى مراسلتنا لإزالته فوراً من قاعدة البيانات.</p>
        <button class="btn-auth" style="margin-top: 30px;" onclick="location.reload()" data-translate="btn_back_home">العودة للرئيسية</button>
    </div>

    <div id="searchOverlay">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2 style="color: var(--main-red);" data-translate="search_results">نتائج البحث</h2>
            <button class="btn-auth" onclick="closeSearch()" data-translate="btn_close">إغلاق</button>
        </div>
        <div id="searchResultsGrid" class="movie-slider" style="flex-wrap: wrap; gap: 20px;"></div>
    </div>

    <div id="accountSection">
        <div class="account-box">
            <h2 id="accDisplayName">اسم المستخدم</h2>
            <p style="margin: 15px 0; color: var(--gray-text);" data-translate="account_welcome">مرحباً بك في لوحة تحكم حسابك</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px;">
                <div style="background: #222; padding: 15px; border-radius: 8px; text-align: center;">
                    <span style="font-size: 13px; color: var(--gray-text);" data-translate="account_watched">أفلام شاهدتها</span><br>
                    <span id="watchStats" style="color: var(--main-red); font-weight: 800; font-size: 1.5em;">0</span>
                </div>
                <div style="background: #222; padding: 15px; border-radius: 8px; text-align: center;">
                    <span style="font-size: 13px; color: var(--gray-text);" data-translate="account_mylist">في قائمتي</span><br>
                    <span id="favStats" style="color: #ffcc00; font-weight: 800; font-size: 1.5em;">0</span>
                </div>
            </div>

            <div style="text-align: right; margin-bottom: 30px;">
                <h3 style="border-right: 4px solid var(--main-red); padding-right: 10px; margin-bottom: 15px;" data-translate="account_favorites">قائمتي المفضلة</h3>
                <div id="favoritesGrid" class="movie-slider" style="flex-wrap: wrap; gap: 10px; justify-content: center; min-height: 100px; background: #111; padding: 15px; border-radius: 10px;">
                    <p style="color: #666; font-size: 14px;" data-translate="account_no_favorites">لا يوجد أفلام في قائمتك بعد.</p>
                </div>
            </div>

            <div style="max-width: 400px; margin: 0 auto;">
                <input type="text" id="editNameInput" data-translate-placeholder="account_change_name" placeholder="تغيير اسم العرض..." style="width: 100%; padding: 10px; background: #111; border: 1px solid #444; color: #fff; border-radius: 5px; margin-bottom: 10px;">
                <button class="btn-auth" onclick="updateUsername()" style="width: 100%; margin-bottom: 10px;" data-translate="account_save_name">حفظ الاسم الجديد</button>
                <button class="btn-auth" onclick="logoutUser()" style="width: 100%; background: #444;" data-translate="account_logout">تسجيل الخروج</button>
                <p onclick="closeAccount()" style="margin-top: 15px; cursor: pointer; text-decoration: underline; font-size: 14px;" data-translate="btn_back_home">العودة للرئيسية</p>
            </div>
        </div>
    </div>

    <main class="content-area" id="mainPageBody">
        <section class="hero">
            <div class="hero-watermark">Syriabest</div>

            <div class="hero-content">
                <h1 data-translate="hero_title">أفلامك المفضلة، <br>في مكان واحد.</h1>
                <p data-translate="hero_description">استمتع بتجربة مشاهدة لا مثيل لها مع Syriabest. دقة عالية، سرعة في التحميل، وأحدث العروض الحصرية.</p>
                <div class="hero-btns">
                    <button class="btn-hero btn-play" onclick="document.getElementById('row-marvel').scrollIntoView()">
                        <i class="fas fa-th-list"></i> <span data-translate="hero_btn_explore">اكتشف المحتوى</span>
                    </button>
                    <button class="btn-hero btn-more" onclick="showAbout()">
                        <i class="fas fa-info-circle"></i> <span data-translate="hero_btn_info">معلومات</span>
                    </button>
                </div>
            </div>
        </section>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_marvel">عالم مارفل السينمائي (Marvel MCU)</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-marvel"></div>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_avengers">سلسلة Avengers</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-avengers"></div>
        </div>
        
        <div class="row">
            <div class="row-title">
                <span data-translate="row_transporter">سلسلة The transporter</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-thetransporter"></div>
        </div>
        
        <div class="row">
            <div class="row-title">
                <span data-translate="row_fast">سلسلة Fast & Furious</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-fast"></div>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_action">أفلام الأكشن</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-action"></div>
        </div>
        
        <div class="row">
            <div class="row-title">
                <span data-translate="row_actioncomedy">اكشن/كوميدي</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-actioncomedy"></div>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_comedy">أفلام كوميدية</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-comedy"></div>
        </div>
        
        <div class="row">
            <div class="row-title">
                <span data-translate="row_horror">أفلام الرعب (الأجزاء الكاملة)</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-horror"></div>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_thriller">إثارة وغموض</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-thriller"></div>
        </div>

        <div class="series-banner">
            <h2 data-translate="series_banner">المسلسلات العربية والأجنبية المنوعة</h2>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_egypt_comedy">مسلسلات مصرية كوميدية</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-egypt-comedy"></div>
        </div>

        <div class="row">
            <div class="row-title">
                <span data-translate="row_foreign_series">مسلسلات أجنبية</span>
                <a href="#" data-translate="row_see_all">مشاهدة الكل</a>
            </div>
            <div class="movie-slider" id="row-foreign-series"></div>
        </div>

        <section class="rating-area">
            <div class="rating-box">
                <h2 style="color: var(--main-red);" data-translate="rating_title">تقييمك يهمنا</h2>
                <p data-translate="rating_description">أخبرنا عن تجربتك أو إذا واجهت أي مشاكل في الموقع</p>
                <textarea id="feedbackMsg" data-translate-placeholder="rating_placeholder" placeholder="اكتب ملاحظاتك هنا..."></textarea>
                <br>
                <button class="btn-auth" onclick="submitFeedback()" data-translate="rating_submit">إرسال التقييم</button>
            </div>
        </section>
    </main>

    <div class="video-popup" id="videoPopup">
        <span class="close-video" onclick="closePlayer()">&times;</span>
        <div class="server-bar" id="serverList"></div>
        <div class="video-wrapper">
            <iframe id="mainPlayer" src="" frameborder="0" allowfullscreen></iframe>
        </div>
        
        <div id="seriesControls" class="series-controls">
            <div class="control-group">
                <h4 data-translate="series_select_season">اختر الموسم:</h4>
                <div id="seasonContainer" class="btn-grid"></div>
            </div>
            <div class="control-group">
                <h4 data-translate="series_select_episode">اختر الحلقة:</h4>
                <div id="episodeContainer" class="btn-grid"></div>
            </div>
        </div>

        <div style="display: flex; flex-direction: column; align-items: center; padding: 20px;">
            <h3 id="movieTitleDisplay" style="color: var(--main-red); font-weight: 800; text-align: center;"></h3>
            <button id="playerFavBtn" class="fav-status-btn" onclick="toggleFavoriteFromPlayer()">
                <i class="fas fa-plus"></i> <span data-translate="player_add_to_list">إضافة لقائمتي</span>
            </button>
        </div>
    </div>

    <div class="auth-modal" id="authModal">
        <div class="modal-box" id="loginBox">
            <i class="fas fa-times close-modal" onclick="toggleModal(false)"></i>
            <h2 data-translate="auth_login_title">تسجيل الدخول</h2>
            <form onsubmit="handleAuth(event)">
                <div class="input-group">
                    <input type="email" id="loginEmail" data-translate-placeholder="auth_email" placeholder="البريد الإلكتروني" required>
                </div>
                <div class="input-group">
                    <input type="password" id="loginPass" data-translate-placeholder="auth_password" placeholder="كلمة المرور" required>
                </div>
                <button type="submit" class="btn-submit">
                    <span data-translate="btn_login">دخول</span>
                </button>
            </form>
            <p class="auth-footer-link" onclick="switchAuthMode('register')"><span data-translate="auth_no_account">ليس لديك حساب؟</span> <span data-translate="auth_create_account">إنشاء حساب</span></p>
        </div>

        <div class="modal-box" id="registerBox" style="display:none;">
            <i class="fas fa-times close-modal" onclick="toggleModal(false)"></i>
            <h2 data-translate="auth_register_title">إنشاء حساب جديد</h2>
            <form id="registerForm" onsubmit="handleRegister(event)">
                <div class="input-group">
                    <input type="email" id="regEmail" data-translate-placeholder="auth_email" placeholder="البريد الإلكتروني" required>
                </div>
                <input type="text" name="bot_check" class="hp-field" tabindex="-1" autocomplete="off">
                <input type="text" name="website" class="hp-field" tabindex="-1" autocomplete="off">
                <input type="email" name="email_confirm" class="hp-field" tabindex="-1" autocomplete="off">
                <div class="input-group">
                    <input type="password" id="regPass" data-translate-placeholder="auth_password" placeholder="كلمة المرور" required>
                </div>
                <div class="input-group">
                    <input type="password" id="regPassConfirm" data-translate-placeholder="auth_password_confirm" placeholder="تأكيد كلمة المرور" required>
                </div>
                
                <div class="captcha-box">
                    <div class="captcha-question" id="captchaQuestion"></div>
                    <input type="text" class="captcha-input" id="captchaAnswer" placeholder="أدخل الإجابة" required autocomplete="off">
                </div>
                
                <button type="submit" id="regSubmitBtn" class="btn-submit">
                    <span id="regBtnText" data-translate="auth_create_account">إنشاء الحساب</span>
                    <div class="loader" id="regLoader"></div>
                </button>
            </form>
            <p class="auth-footer-link" onclick="switchAuthMode('login')"><span data-translate="auth_have_account">لديك حساب؟</span> <span data-translate="btn_login">تسجيل الدخول</span></p>
        </div>

        <div class="modal-box" id="verifyBox" style="display:none;">
            <i class="fas fa-times close-modal" onclick="toggleModal(false)"></i>
            <h2 data-translate="auth_verify_title">تأكيد الحساب</h2>
            <p id="verifyInstruction" style="text-align:center; font-size:14px; margin-bottom:15px; color:var(--gray-text)" data-translate="auth_verify_instruction">أدخل كود التحقق المرسل إلى إيميلك</p>
            <form onsubmit="handleVerification(event)">
                <div class="input-group">
                    <input type="text" id="verifyInput" placeholder="00000" maxlength="5" style="text-align:center; font-size:24px; letter-spacing:10px;" required>
                </div>
                <button type="submit" class="btn-submit" data-translate="auth_verify_btn">تحقق</button>
            </form>
        </div>
    </div>

    <footer>
        <div class="footer-grid">
            <ul>
                <li><a href="#" data-translate="footer_faq">الأسئلة الشائعة</a></li>
                <li><a href="#" onclick="showDMCA()" data-translate="footer_dmca">DMCA / حقوق النشر</a></li>
            </ul>
            <ul>
                <li><a href="#" data-translate="footer_help">مركز المساعدة</a></li>
                <li><a href="#" data-translate="footer_terms">الأحكام القانونية</a></li>
            </ul>
            <ul>
                <li><a href="#" data-translate="footer_account">الحساب</a></li>
                <li><a href="#" data-translate="footer_exclusive">فقط على Syriabest</a></li>
            </ul>
        </div>
        <p class="copyright" data-translate="footer_copyright">© 2026 Syriabest. جميع الحقوق محفوظة لـ</p>
        <span class="version-tag">v1.3 Enhanced</span>
    </footer>

    <script>
        // PWA Service Worker Registration & Install Prompt
        let deferredPrompt;
        
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('SW registered'))
                    .catch(err => console.log('SW error:', err));
            });
        }

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('pwaInstallContainer').style.display = 'block';
        });

        document.getElementById('pwaInstallBtn').addEventListener('click', async () => {
            if (!deferredPrompt) return;
            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`User response: ${outcome}`);
            deferredPrompt = null;
            document.getElementById('pwaInstallContainer').style.display = 'none';
        });

        // Developer Tools Protection
        (function() {
            const shield = () => {
                const start = new Date();
                debugger;
                const end = new Date();
                if (end - start > 100) {
                    document.body.innerHTML = "<h1 style='color:red; text-align:center; margin-top:20%;'>تم حجب الوصول: لا يسمح باستخدام أدوات المطورين!</h1>";
                }
            };
            setInterval(shield, 1000);
        })();

        window.addEventListener('keydown', (e) => {
            if (e.key === "F12" || (e.ctrlKey && e.shiftKey && e.key === "I") || (e.ctrlKey && e.key === "u")) {
                e.preventDefault();
                return false;
            }
        });

        // Rate Limiting System
        const rateLimiter = {
            attempts: {},
            check: function(action, limit = 5, timeWindow = 60000) {
                const now = Date.now();
                if (!this.attempts[action]) {
                    this.attempts[action] = [];
                }
                this.attempts[action] = this.attempts[action].filter(time => now - time < timeWindow);
                if (this.attempts[action].length >= limit) {
                    return false;
                }
                this.attempts[action].push(now);
                return true;
            }
        };

        // Math CAPTCHA System
        let captchaAnswer = 0;
        function generateCaptcha() {
            const num1 = Math.floor(Math.random() * 20) + 1;
            const num2 = Math.floor(Math.random() * 20) + 1;
            const operations = ['+', '-', '*'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            
            let question = '';
            switch(operation) {
                case '+':
                    captchaAnswer = num1 + num2;
                    question = `${num1} + ${num2} = ؟`;
                    break;
                case '-':
                    captchaAnswer = num1 - num2;
                    question = `${num1} - ${num2} = ؟`;
                    break;
                case '*':
                    captchaAnswer = num1 * num2;
                    question = `${num1} × ${num2} = ؟`;
                    break;
            }
            
            document.getElementById('captchaQuestion').textContent = question;
        }

        let currentLanguage = localStorage.getItem('sb_language') || 'ar';

        const translations = {
            ar: {
                nav_home: "الرئيسية",
                nav_series: "مسلسلات",
                nav_movies: "أفلام",
                nav_genres: "الفئات",
                nav_dmca: "DMCA / حقوق النشر",
                genre_marvel: "مارفل",
                genre_action: "أكشن",
                genre_comedy: "كوميدي",
                genre_horror: "رعب",
                genre_thriller: "إثارة وغموض",
                btn_login: "دخول",
                btn_close: "إغلاق",
                btn_back_home: "العودة للرئيسية",
                hero_title: "أفلامك المفضلة، <br>في مكان واحد.",
                hero_description: "استمتع بتجربة مشاهدة لا مثيل لها مع Syriabest. دقة عالية، سرعة في التحميل، وأحدث العروض الحصرية.",
                hero_btn_explore: "اكتشف المحتوى",
                hero_btn_info: "معلومات",
                row_marvel: "عالم مارفل السينمائي (Marvel MCU)",
                row_avengers: "سلسلة Avengers",
                row_transporter: "سلسلة The transporter",
                row_fast: "سلسلة Fast & Furious",
                row_action: "أفلام الأكشن",
                row_actioncomedy: "اكشن/كوميدي",
                row_comedy: "أفلام كوميدية",
                row_horror: "أفلام الرعب (الأجزاء الكاملة)",
                row_thriller: "إثارة وغموض",
                row_egypt_comedy: "مسلسلات مصرية كوميدية",
                row_foreign_series: "مسلسلات أجنبية",
                row_see_all: "مشاهدة الكل",
                series_banner: "المسلسلات العربية والأجنبية المنوعة",
                search_placeholder: "ابحث...",
                search_results: "نتائج البحث",
                account_welcome: "مرحباً بك في لوحة تحكم حسابك",
                account_watched: "أفلام شاهدتها",
                account_mylist: "في قائمتي",
                account_favorites: "قائمتي المفضلة",
                account_no_favorites: "لا يوجد أفلام في قائمتك بعد.",
                account_change_name: "تغيير اسم العرض...",
                account_save_name: "حفظ الاسم الجديد",
                account_logout: "تسجيل الخروج",
                player_add_to_list: "إضافة لقائمتي",
                player_in_list: "في قائمتي",
                series_select_season: "اختر الموسم:",
                series_select_episode: "اختر الحلقة:",
                auth_login_title: "تسجيل الدخول",
                auth_register_title: "إنشاء حساب جديد",
                auth_verify_title: "تأكيد الحساب",
                auth_email: "البريد الإلكتروني",
                auth_password: "كلمة المرور",
                auth_password_confirm: "تأكيد كلمة المرور",
                auth_no_account: "ليس لديك حساب؟",
                auth_have_account: "لديك حساب؟",
                auth_create_account: "إنشاء حساب",
                auth_verify_instruction: "أدخل كود التحقق المرسل إلى إيميلك",
                auth_verify_btn: "تحقق",
                rating_title: "تقييمك يهمنا",
                rating_description: "أخبرنا عن تجربتك أو إذا واجهت أي مشاكل في الموقع",
                rating_placeholder: "اكتب ملاحظاتك هنا...",
                rating_submit: "إرسال التقييم",
                dmca_title: "DMCA - سياسة حقوق النشر",
                dmca_text: 'موقع <strong>Syriabest</strong> هو محرك بحث للمحتوى الترفيهي. نحن لا نقوم برفع أو استضافة أي فيديوهات على خوادمنا الخاصة. جميع الروابط يتم جلبها من مواقع خارجية. إذا كنت صاحب حق وتريد إزالة محتوى، يرجى مراسلتنا لإزالته فوراً من قاعدة البيانات.',
                footer_faq: "الأسئلة الشائعة",
                footer_dmca: "DMCA / حقوق النشر",
                footer_help: "مركز المساعدة",
                footer_terms: "الأحكام القانونية",
                footer_account: "الحساب",
                footer_exclusive: "فقط على Syriabest",
                footer_copyright: "© 2026 Syriabest. جميع الحقوق محفوظة لـ",
                card_play: "تشغيل",
                card_locked: "مغلق - سجل دخول",
                pwa_install: "تنزيل التطبيق",
                notif_title: "الإشعارات",
                notif_empty: "لا توجد إشعارات جديدة",
                about_title: "معلومات عن الموقع",
                about_p1: 'مرحباً بك في <strong style="color: var(--main-red);">Syriabest</strong> - وجهتك الأولى لمشاهدة أحدث الأفلام والمسلسلات العربية والأجنبية بأعلى جودة!',
                about_p2: "نقدم لك تجربة مشاهدة فريدة مع:",
                about_p3: 'تم تطوير الموقع بواسطة <strong style="color: var(--main-red);">Mostafa Barbour</strong>',
                about_feature1: "سيرفرات متعددة وسريعة",
                about_feature2: "جودة عالية HD",
                about_feature3: "تحديثات يومية",
                about_feature4: "مكتبة ضخمة من المحتوى",
                about_feature5: "دعم فني 24/7"
            },
            en: {
                nav_home: "Home",
                nav_series: "TV Shows",
                nav_movies: "Movies",
                nav_genres: "Genres",
                nav_dmca: "DMCA / Copyright",
                genre_marvel: "Marvel",
                genre_action: "Action",
                genre_comedy: "Comedy",
                genre_horror: "Horror",
                genre_thriller: "Thriller & Mystery",
                btn_login: "Sign In",
                btn_close: "Close",
                btn_back_home: "Back to Home",
                hero_title: "Your Favorite Movies, <br>All in One Place.",
                hero_description: "Enjoy an unparalleled viewing experience with Syriabest. High quality, fast loading, and the latest exclusive shows.",
                hero_btn_explore: "Explore Content",
                hero_btn_info: "More Info",
                row_marvel: "Marvel Cinematic Universe (MCU)",
                row_avengers: "Avengers Series",
                row_transporter: "The Transporter Series",
                row_fast: "Fast & Furious Series",
                row_action: "Action Movies",
                row_actioncomedy: "Action/Comedy",
                row_comedy: "Comedy Movies",
                row_horror: "Horror Movies (Complete Series)",
                row_thriller: "Thriller & Mystery",
                row_egypt_comedy: "Egyptian Comedy Series",
                row_foreign_series: "Foreign Series",
                row_see_all: "See All",
                series_banner: "Diverse Arabic and Foreign Series",
                search_placeholder: "Search...",
                search_results: "Search Results",
                account_welcome: "Welcome to your account dashboard",
                account_watched: "Movies Watched",
                account_mylist: "In My List",
                account_favorites: "My Favorites",
                account_no_favorites: "No movies in your list yet.",
                account_change_name: "Change display name...",
                account_save_name: "Save New Name",
                account_logout: "Logout",
                player_add_to_list: "Add to My List",
                player_in_list: "In My List",
                series_select_season: "Select Season:",
                series_select_episode: "Select Episode:",
                auth_login_title: "Sign In",
                auth_register_title: "Create New Account",
                auth_verify_title: "Verify Account",
                auth_email: "Email Address",
                auth_password: "Password",
                auth_password_confirm: "Confirm Password",
                auth_no_account: "Don't have an account?",
                auth_have_account: "Already have an account?",
                auth_create_account: "Create Account",
                auth_verify_instruction: "Enter the verification code sent to your email",
                auth_verify_btn: "Verify",
                rating_title: "Your Feedback Matters",
                rating_description: "Tell us about your experience or if you encountered any issues on the site",
                rating_placeholder: "Write your comments here...",
                rating_submit: "Submit Feedback",
                dmca_title: "DMCA - Copyright Policy",
                dmca_text: '<strong>Syriabest</strong> is a search engine for entertainment content. We do not upload or host any videos on our own servers. All links are fetched from external websites. If you are a rights holder and want to remove content, please contact us to remove it immediately from the database.',
                footer_faq: "FAQ",
                footer_dmca: "DMCA / Copyright",
                footer_help: "Help Center",
                footer_terms: "Legal Terms",
                footer_account: "Account",
                footer_exclusive: "Only on Syriabest",
                footer_copyright: "© 2026 Syriabest. All Rights Reserved",
                card_play: "Play",
                card_locked: "Locked - Sign In",
                pwa_install: "Install App",
                notif_title: "Notifications",
                notif_empty: "No new notifications",
                about_title: "About Us",
                about_p1: 'Welcome to <strong style="color: var(--main-red);">Syriabest</strong> - your premier destination for watching the latest Arabic and foreign movies and series in the highest quality!',
                about_p2: "We offer you a unique viewing experience with:",
                about_p3: 'Developed by <strong style="color: var(--main-red);">Mostafa Barbour</strong>',
                about_feature1: "Multiple fast servers",
                about_feature2: "High quality HD",
                about_feature3: "Daily updates",
                about_feature4: "Huge content library",
                about_feature5: "24/7 technical support"
            }
        };

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'ar' ? 'en' : 'ar';
            localStorage.setItem('sb_language', currentLanguage);
            applyLanguage();
        }

        function applyLanguage() {
            const html = document.getElementById('htmlRoot');
            const langBtn = document.getElementById('currentLang');
            
            if (currentLanguage === 'en') {
                html.setAttribute('lang', 'en');
                html.setAttribute('dir', 'ltr');
                langBtn.textContent = 'AR';
            } else {
                html.setAttribute('lang', 'ar');
                html.setAttribute('dir', 'rtl');
                langBtn.textContent = 'EN';
            }
            
            document.querySelectorAll('[data-translate]').forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLanguage][key]) {
                    el.innerHTML = translations[currentLanguage][key];
                }
            });
            
            document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                const key = el.getAttribute('data-translate-placeholder');
                if (translations[currentLanguage][key]) {
                    el.placeholder = translations[currentLanguage][key];
                }
            });
            
            initApp();
        }

        function toggleGenreMenu() {
            const menu = document.getElementById('genreMenu');
            menu.classList.toggle('active');
        }

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.genre-dropdown')) {
                document.getElementById('genreMenu').classList.remove('active');
            }
            if (!e.target.closest('.notification-btn') && !e.target.closest('#notificationsPanel')) {
                document.getElementById('notificationsPanel').style.display = 'none';
            }
        });

        // Notifications System
        let notifications = JSON.parse(localStorage.getItem('sb_notifications')) || [];

        function toggleNotifications() {
            const panel = document.getElementById('notificationsPanel');
            panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
            if (currentUser && currentUser.isOwner) {
                renderNotifications();
            }
        }

        function renderNotifications() {
            const list = document.getElementById('notificationsList');
            const badge = document.getElementById('notifBadge');
            
            if (notifications.length === 0) {
                list.innerHTML = `<p style="padding: 20px; text-align: center; color: var(--gray-text);" data-translate="notif_empty">لا توجد إشعارات جديدة</p>`;
                badge.style.display = 'none';
            } else {
                badge.style.display = 'flex';
                badge.textContent = notifications.length;
                list.innerHTML = '';
                notifications.reverse().forEach((notif, index) => {
                    const item = document.createElement('div');
                    item.className = 'notification-item';
                    item.innerHTML = `
                        <div style="font-weight: bold; margin-bottom: 5px;">${notif.userName}</div>
                        <div style="color: #ddd; font-size: 13px;">${notif.message}</div>
                        <div class="notification-time">${notif.time}</div>
                    `;
                    list.appendChild(item);
                });
            }
        }

        function addNotification(userName, message) {
            const notification = {
                userName: userName,
                message: message,
                time: new Date().toLocaleString('ar-EG'),
                timestamp: Date.now()
            };
            notifications.push(notification);
            localStorage.setItem('sb_notifications', JSON.stringify(notifications));
            updateNotificationBadge();
        }

        function updateNotificationBadge() {
            const badge = document.getElementById('notifBadge');
            if (currentUser && currentUser.isOwner && notifications.length > 0) {
                badge.style.display = 'flex';
                badge.textContent = notifications.length;
            } else {
                badge.style.display = 'none';
            }
        }

        function showAbout() {
            document.getElementById('aboutModal').style.display = 'flex';
        }

        function closeAbout() {
            document.getElementById('aboutModal').style.display = 'none';
        }

        let currentUser = JSON.parse(localStorage.getItem('sb_user')) || null;
        let watchCount = parseInt(localStorage.getItem('sb_watch_count')) || 0;
        let favorites = JSON.parse(localStorage.getItem('sb_favorites')) || [];
        let tempRegData = null;
        let currentOTP = ""; 

        const movieData = {
            marvel: [
                { id: "tt0371746", title: "Iron Man 1", img: "ironman1.JPG", type: "movie" },
                { id: "tt1228705", title: "Iron Man 2", img: "ironman2.JPG", type: "movie" },
                { id: "tt1300854", title: "Iron Man 3", img: "ironman3.JPG", type: "movie" },
                { id: "tt0800369", title: "Thor 1", img: "thor1.JPG", type: "movie" },
                { id: "tt1981115", title: "Thor: The Dark World", img: "thor2.JPG", type: "movie" },
                { id: "tt3501632", title: "Thor: Ragnarok", img: "thor3.JPG", type: "movie" },
                { id: "tt10648342", title: "Thor: Love and Thunder", img: "thor4.JPG", type: "movie" },
                { id: "tt0458339", title: "Captain America 1", img: "cap1.JPG", type: "movie" },
                { id: "tt1843866", title: "Captain America 2", img: "cap2.JPG", type: "movie" },
                { id: "tt3498820", title: "Captain America 3", img: "cap3.JPG", type: "movie" },
                { id: "tt2015381", title: "Guardians of the Galaxy 1", img: "gotg1.JPG", type: "movie" },
                { id: "tt3896198", title: "Guardians of the Galaxy 2", img: "gotg2.JPG", type: "movie" },
                { id: "tt6791350", title: "Guardians of the Galaxy 3", img: "gotg3.JPG", type: "movie" },
                { id: "tt9114286", title: "Black Panther: WF", img: "panther2.JPG", type: "movie" },
                { id: "tt2250912", title: "Spider-Man: Homecoming", img: "spiderman1.JPG", type: "movie" },
                { id: "tt6320628", title: "Spider-Man: Far From Home", img: "spiderman2.JPG", type: "movie" },
                { id: "tt10872600", title: "Spider-Man: No Way Home", img: "spiderman3.JPG", type: "movie" }
            ],
            avengers: [
                { id: "tt0848228", title: "The Avengers (2012)", img: "avengers1.JPG", type: "movie" },
                { id: "tt2395427", title: "Avengers: Age of Ultron", img: "avengers2.JPG", type: "movie" },
                { id: "tt4154756", title: "Avengers: Infinity War", img: "avengers3.JPG", type: "movie" },
                { id: "tt4154796", title: "Avengers: Endgame", img: "avengers4.JPG", type: "movie" }
            ],
            transporter: [
                { id: "tt0293662", title: "The Transporter - (2002)", img: "trans1.JPG", type: "movie" },
                { id: "tt0388482", title: "(Transporter 2 - 2005)", img: "trans2.JPG", type: "movie" },
                { id: "tt1129442", title: "(Transporter 3 - 2008)", img: "trans3.JPG", type: "movie" },
                { id: "tt2938956", title: "(The Transporter Refueled - 2015)", img: "trans4.JPG", type: "movie" }
            ],
            fast: [
                { id: "tt0232500", title: "Fast & Furious 1", img: "fast1.JPG", type: "movie" },
                { id: "tt0322259", title: "2 Fast 2 Furious", img: "fast2.JPG", type: "movie" },
                { id: "tt0463985", title: "Tokyo Drift", img: "fast3.JPG", type: "movie" },
                { id: "tt1013752", title: "Fast & Furious 4", img: "fast4.JPG", type: "movie" },
                { id: "tt1596343", title: "Fast Five", img: "fast5.JPG", type: "movie" },
                { id: "tt1905041", title: "Fast 6", img: "fast6.JPG", type: "movie" },
                { id: "tt2820852", title: "Furious 7", img: "fast7.JPG", type: "movie" },
                { id: "tt4630562", title: "The Fate of the Furious", img: "fast8.JPG", type: "movie" },
                { id: "tt5433138", title: "F9: The Fast Saga", img: "fast9.JPG", type: "movie" },
                { id: "tt5433140", title: "Fast X", img: "fast10.JPG", type: "movie" },
                { id: "tt6806448", title: "Fast & Furious Presents: Hobbs & Shaw", img: "fast11.JPG", type: "movie" }
            ],
            action: [
                { id: "tt0068646", title: "The Godfather Part I", img: "godfather.JPG", type: "movie" },
                { id: "tt0071562", title: "The Godfather Part II", img: "godfather2.JPG", type: "movie" },
                { id: "tt0099685", title: "Goodfellas", img: "goodfellas.JPG", type: "movie" },
                { id: "tt0086250", title: "Scarface", img: "scarface.JPG", type: "movie" },
                { id: "tt2911666", title: "John Wick", img: "johnwick.JPG", type: "movie" },
                { id: "tt0468569", title: "The Dark Knight", img: "darkknight.JPG", type: "movie" },
                { id: "tt0133093", title: "The Matrix", img: "matrix.JPG", type: "movie" },
                { id: "tt0816692", title: "Interstellar", img: "interstellar.JPG", type: "movie" },
                { id: "tt0172495", title: "Gladiator", img: "gladiator.JPG", type: "movie" },
                { id: "tt4332232", title: "Fractured", img: "fractured.JPG", type: "movie" },
                { id: "tt0465494", title: "Hitman", img: "hitman.JPG", type: "movie" },
                { id: "tt2679042", title: "Hitman Agent 47", img: "hitman2.JPG", type: "movie" },
                { id: "tt32357218", title: "shelter", img: "shelter.JPG", type: "movie" },
                { id: "689d03dd7677f", title: "private page", img: "priv.JPG", type: "movie" }
            ],
            actioncomedy: [      
                { id: "tt0112442", title: "Bad Boys", img: "badboys.JPG", type: "movie" },
                { id: "tt0172156", title: "Bad Boys II", img: "badboys2.JPG", type: "movie" },
                { id: "tt7991608", title: "Red Notice", img: "rednot.JPG", type: "movie" },
                { id: "tt2463208", title: "The Adam Project", img: "adam.JPG", type: "movie" },
                { id: "tt2283362", title: "Jumanji: Welcome to the Jungle", img: "jumanji.JPG", type: "movie" },
                { id: "tt7975244", title: "Jumanji: The Next Level", img: "level.JPG", type: "movie" },
                { id: "tt26735127", title: "Jumanji3", img: "jumanji3.heic", type: "movie" },
                { id: "tt1489889", title: "Central Intelligence", img: "central.JPG", type: "movie" },
                { id: "tt1469304", title: "Baywatch", img: "baywatch.JPG", type: "movie" },
                { id: "tt8106534", title: "6 Underground", img: "under.JPG", type: "movie" },
                { id: "tt6264654", title: "Free Guy", img: "free.JPG", type: "movie" },
                { id: "tt1464335", title: "Uncharted", img: "uncharted.JPG", type: "movie" },
                { id: "tt1649418", title: "The Gray Man", img: "gray.JPG", type: "movie" },
                { id: "tt1408253", title: "Ride Along", img: "ride.JPG", type: "movie" },
                { id: "tt2231461", title: "Rampage", img: "rampage.JPG", type: "movie" },
                { id: "tt1375670", title: "Grown Ups", img: "grown.JPG", type: "movie" },
                { id: "tt1637725", title: "Ted", img: "Ted.JPG", type: "movie" },
                { id: "tt2637276", title: "Ted 2", img: "Ted2.JPG", type: "movie" },
                { id: "tt0870154", title: "Jungle Cruise", img: "Jungle.JPG", type: "movie" },
                { id: "tt0369610", title: "Jurassic World", img: "World.JPG", type: "movie" },
                { id: "tt0116126", title: "Don't Be a Menace to South Central While Drinking Your Juice in the Hood", img: "dont.JPG", type: "movie" },
            ],
            comedy: [
                { id: "tt0360486", title: "The Hangover", img: "hangover1.JPG", type: "movie" },
                { id: "tt1411697", title: "The Hangover Part II", img: "hangover2.JPG", type: "movie" },
                { id: "tt1951261", title: "The Hangover Part III", img: "hangover3.JPG", type: "movie" },
                { id: "tt0829482", title: "Superbad", img: "superbad.JPG", type: "movie" },
                { id: "tt1232829", title: "21 Jump Street", img: "21jump.JPG", type: "movie" },
                { id: "tt2294449", title: "22 Jump Street", img: "22jump.JPG", type: "movie" },
                { id: "tt1723121", title: "We're the Millers", img: "millers.JPG", type: "movie" },
                { id: "tt2820852", title: "Neighbors", img: "neighbors.JPG", type: "movie" },
                { id: "tt2004420", title: "Neighbors 2", img: "neighbors2.JPG", type: "movie" },
                { id: "tt0457400", title: "Pineapple Express", img: "pineapple.JPG", type: "movie" },
                { id: "tt1231583", title: "Due Date", img: "duedate.JPG", type: "movie" },
                { id: "tt0443680", title: "Knocked Up", img: "knockedup.JPG", type: "movie" }
            ],
            horror: [
                { id: "tt0387564", title: "Saw 1", img: "saw1.JPG", type: "movie" },
                { id: "tt0432348", title: "Saw 2", img: "saw2.JPG", type: "movie" },
                { id: "tt0489270", title: "Saw 3", img: "saw3.JPG", type: "movie" },
                { id: "tt0890870", title: "Saw 4", img: "saw4.JPG", type: "movie" },
                { id: "tt1132626", title: "Saw 5", img: "saw5.JPG", type: "movie" },
                { id: "tt1233227", title: "Saw 6", img: "saw6.JPG", type: "movie" },
                { id: "tt1477076", title: "Saw 3D", img: "saw7.JPG", type: "movie" },
                { id: "tt3348730", title: "Jigsaw (Saw 8)", img: "saw8.JPG", type: "movie" },
                { id: "tt0117571", title: "Scream 1", img: "scream1.JPG", type: "movie" },
                { id: "tt0120082", title: "Scream 2", img: "scream2.JPG", type: "movie" },
                { id: "tt0134084", title: "Scream 3", img: "scream3.JPG", type: "movie" },
                { id: "tt1262416", title: "Scream 4", img: "scream4.JPG", type: "movie" },
                { id: "tt11245972", title: "Scream 5", img: "scream5.JPG", type: "movie" },
                { id: "tt17663992", title: "Scream 6", img: "scream6.JPG", type: "movie" },
                { id: "tt27047903", title: "Scream 7", img: "scream7.JPG", type: "movie" },
                { id: "tt1457767", title: "The Conjuring 1", img: "conjuring1.JPG", type: "movie" },
                { id: "tt3065204", title: "The Conjuring 2", img: "conjuring2.jpeg", type: "movie" },
                { id: "tt7069210", title: "The Conjuring 3", img: "conjuring3.JPG", type: "movie" },
                { id: "tt15474916", title: "Smile", img: "smile.JPG", type: "movie" },
                { id: "tt29268110", title: "Smile 2", img: "smile2.JPG", type: "movie" },
                { id: "tt5814060", title: "The Nun", img: "nun1.JPG", type: "movie" },
                { id: "tt10160976", title: "The Nun 2", img: "nun2.JPG", type: "movie" },
                { id: "tt1591095", title: "Insidious: Chapter 1", img: "insidious1.JPG", type: "movie" },
                { id: "tt2226417", title: "Insidious: Chapter 2", img: "insidious2.JPG", type: "movie" },
                { id: "tt3195644", title: "Insidious: Chapter 3", img: "insidious3.JPG", type: "movie" },
                { id: "tt13405778", title: "Insidious: The Red Door", img: "insidious5.JPG", type: "movie" },
                { id: "tt1396484", title: "It (2017)", img: "it1.JPG", type: "movie" },
                { id: "tt7349950", title: "It: Chapter Two", img: "it2.JPG", type: "movie" }
            ],
            thriller: [
                { id: "tt1051906", title: "The Invisible Man (2020)", img: "invisible.JPG", type: "movie" },
                { id: "tt9764362", title: "The Menu (2022)", img: "menu.JPG", type: "movie" },
                { id: "tt12747748", title: "Leave the World Behind (2023)", img: "leave-world.JPG", type: "movie" },
                { id: "tt9639470", title: "Last Night in Soho (2021)", img: "soho.JPG", type: "movie" },
                { id: "tt11564570", title: "Glass Onion (2022)", img: "glass-onion.JPG", type: "movie" },
                { id: "tt8740790", title: "Missing (2023)", img: "missing.JPG", type: "movie" },
                { id: "tt26753003", title: "Trap (2024)", img: "trap.JPG", type: "movie" },
                { id: "tt7657566", title: "Death on the Nile (2022)", img: "nile.JPG", type: "movie" },
                { id: "tt14138650", title: "The Pale Blue Eye (2022)", img: "blue-eye.JPG", type: "movie" },
                { id: "tt11301886", title: "Rebel Ridge (2024)", img: "rebel.JPG", type: "movie" }
            ],
            egyptComedy: [
                { id: "tt10228372", title: "الواد سيد الشحات", img: "sayed-shahat.JPG", type: "series", seasons: 1, episodes: 30 },
                { id: "tt21064402", title: "اللعبة", img: "el-leba.JPG", type: "series", seasons: 4, episodes: 30 },
                { id: "tt14460770", title: "موضوع عائلي", img: "mawdoo-family.JPG", type: "series", seasons: 2, episodes: 12 },
                { id: "tt14587422", title: "أشغال شقة", img: "ashghal-shaqa.JPG", type: "series", seasons: 1, episodes: 15 }
            ],
            foreignSeries: [
                { id: "tt0903747", title: "Breaking Bad", img: "breaking-bad.JPG", type: "series", seasons: 5, episodes: 13 },
                { id: "tt0944947", title: "Game of Thrones", img: "got.JPG", type: "series", seasons: 8, episodes: 10 },
                { id: "tt11198330", title: "The Last of Us", img: "last-of-us.JPG", type: "series", seasons: 1, episodes: 9 },
                { id: "tt13634792", title: "mouse (2021)", img: "mouse.JPG", type: "series", seasons: 1, episodes: 20 }
            ]
        };

const apis = [
    { name: "سيرفر 1", movie: "https://vidsrc.me/embed/movie?imdb=", tv: "https://vidsrc.me/embed/tv?imdb=" },
    { name: "سيرفر 2", movie: "https://vidsrc.to/embed/movie/", tv: "https://vidsrc.to/embed/tv/" },
    { name: "سيرفر 3", movie: "https://autoembed.to/movie/imdb/", tv: "https://autoembed.to/tv/imdb/" },
    { 
        name: "سيرفر خاص 🔒", 
        get movie() {
            let p = prompt("هذا السيرفر مقفل، أدخل الرقم السري:");
            return (p === "6572134") ? "https://www.pornhub.com/embed/" : "https://about:blank";
        },
        get tv() {
            let p = prompt("هذا السيرفر مقفل، أدخل الرقم السري:");
            return (p === "6572134") ? "https://www.pornhub.com/embed/" : "https://about:blank";
        }
    }
];



        let activeMedia = null;
        let currentS = 1;
        let currentE = 1;
        let currentServerIdx = 0;
// وظيفة القفل للسيرفر الخاص
function checkPrivateAccess(idx) {
    if (idx === 3) { // إذا اختار السيرفر الرابع (سيرفر خاص)
        let pin = prompt("المحتوى مقفل، أدخل الرمز السري:");
        if (pin === "6572134") {
            return true;
        } else {
            alert("الرمز خطأ!");
            return false;
        }
    }
    return true; // السيرفرات العادية تفتح بدون قفل
}

        window.addEventListener('scroll', () => {
            const header = document.getElementById('mainNav');
            if (header && window.scrollY > 100) header.classList.add('scrolled');
            else if(header) header.classList.remove('scrolled');
        });

        function initApp() {
            renderRow('row-marvel', movieData.marvel);
            renderRow('row-avengers', movieData.avengers);
            renderRow('row-thetransporter', movieData.transporter);
            renderRow('row-fast', movieData.fast);
            renderRow('row-action', movieData.action);
            renderRow('row-actioncomedy', movieData.actioncomedy);
            renderRow('row-comedy', movieData.comedy);
            renderRow('row-horror', movieData.horror);
            renderRow('row-thriller', movieData.thriller);
            renderRow('row-egypt-comedy', movieData.egyptComedy);
            renderRow('row-foreign-series', movieData.foreignSeries);
            checkAuthStatus();
            updateNotificationBadge();
            applyLanguage();
        }

        function showDMCA() {
            document.getElementById('mainPageBody').style.display = 'none';
            document.getElementById('dmcaSection').style.display = 'block';
        }

        function checkAuthStatus() {
            const btn = document.getElementById('mainAuthBtn');
            if (currentUser) {
                btn.innerText = currentLanguage === 'ar' ? "حسابي" : "My Account";
                btn.onclick = openAccount;
            } else {
                btn.innerText = translations[currentLanguage].btn_login;
                btn.onclick = () => toggleModal(true);
            }
        }

        function renderRow(containerId, movies) {
            const container = document.getElementById(containerId);
            if(!container || !movies) return;
            container.innerHTML = ""; 
            movies.forEach(m => {
                const card = createCard(m);
                container.appendChild(card);
            });
        }

        function createCard(m) {
            const card = document.createElement('div');
            card.className = 'movie-card';
            const isFav = favorites.some(f => f.id === m.id);
            
            const playText = currentLanguage === 'ar' ? 'تشغيل' : 'Play';
            const lockedText = currentLanguage === 'ar' ? 'مغلق - سجل دخول' : 'Locked - Sign In';
            
            const iconHTML = currentUser 
                ? `<i class="fas fa-play-circle"></i><span>${m.title}</span>` 
                : `<i class="fas fa-lock"></i><span>${lockedText}</span>`;

            const favBtnHTML = currentUser 
                ? `<div class="fav-btn-card ${isFav ? 'active' : ''}" onclick="event.stopPropagation(); toggleFavorite('${m.id}')">
                    <i class="fa${isFav ? 's' : 'r'} fa-heart"></i>
                   </div>` 
                : '';

            card.innerHTML = `
                ${favBtnHTML}
                <img src="${m.img}" alt="${m.title}">
                <div class="card-overlay">${iconHTML}</div>
            `;
            card.onclick = () => playMedia(m);
            return card;
        }

        function toggleFavorite(id) {
            if (!currentUser) return toggleModal(true);
            const allItems = Object.values(movieData).flat();
            const item = allItems.find(m => m.id === id);
            const index = favorites.findIndex(f => f.id === id);
            if (index > -1) favorites.splice(index, 1);
            else favorites.push(item);
            localStorage.setItem('sb_favorites', JSON.stringify(favorites));
            initApp();
            if (activeMedia && activeMedia.id === id) updatePlayerFavBtn();
            if (document.getElementById('accountSection').style.display === 'block') renderFavorites();
        }

        function updatePlayerFavBtn() {
            const btn = document.getElementById('playerFavBtn');
            const isFav = favorites.some(f => f.id === activeMedia.id);
            if (isFav) {
                btn.classList.add('active');
                btn.innerHTML = `<i class="fas fa-check"></i> ${translations[currentLanguage].player_in_list}`;
            } else {
                btn.classList.remove('active');
                btn.innerHTML = `<i class="fas fa-plus"></i> ${translations[currentLanguage].player_add_to_list}`;
            }
        }

        function toggleFavoriteFromPlayer() { if (activeMedia) toggleFavorite(activeMedia.id); }

        function renderFavorites() {
            const grid = document.getElementById('favoritesGrid');
            const stat = document.getElementById('favStats');
            stat.innerText = favorites.length;
            if (favorites.length === 0) {
                grid.innerHTML = `<p style="color: #666; font-size: 14px; width:100%; text-align:center;">${translations[currentLanguage].account_no_favorites}</p>`;
                return;
            }
            grid.innerHTML = "";
            favorites.forEach(m => grid.appendChild(createCard(m)));
        }

        function playMedia(item) {
            if (!currentUser) {
                const msg = currentLanguage === 'ar'
                    ? 'يجب عليك تسجيل الدخول أولاً لفتح القفل ومشاهدة المحتوى!'
                    : 'You must sign in first to unlock and watch the content!';
                alert(msg);
                toggleModal(true);
                return;
            }
            activeMedia = item;
            currentS = 1; currentE = 1; currentServerIdx = 0;
            watchCount++;
            localStorage.setItem('sb_watch_count', watchCount);
            document.getElementById('movieTitleDisplay').innerText = item.title;
            updatePlayerFavBtn();
            const seriesControls = document.getElementById('seriesControls');
            if (item.type === "series") { seriesControls.style.display = "block"; renderSeriesUI(); }
            else { seriesControls.style.display = "none"; }
            updatePlayer();
            document.getElementById('videoPopup').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function renderSeriesUI() {
            const sContainer = document.getElementById('seasonContainer');
            const eContainer = document.getElementById('episodeContainer');
            const seasonText = currentLanguage === 'ar' ? 'الموسم' : 'Season';
            const episodeText = currentLanguage === 'ar' ? 'الحلقة' : 'Episode';
            
            sContainer.innerHTML = "";
            for (let i = 1; i <= activeMedia.seasons; i++) {
                const btn = document.createElement('button');
                btn.className = "ep-btn" + (i === currentS ? " active" : "");
                btn.innerText = seasonText + " " + i;
                btn.onclick = () => { currentS = i; currentE = 1; renderSeriesUI(); updatePlayer(); };
                sContainer.appendChild(btn);
            }
            eContainer.innerHTML = "";
            for (let j = 1; j <= activeMedia.episodes; j++) {
                const btn = document.createElement('button');
                btn.className = "ep-btn" + (j === currentE ? " active" : "");
                btn.innerText = episodeText + " " + j;
                btn.onclick = () => { currentE = j; renderSeriesUI(); updatePlayer(); };
                eContainer.appendChild(btn);
            }
        }

        function updatePlayer() {
            const player = document.getElementById('mainPlayer');
            const serverList = document.getElementById('serverList');
            serverList.innerHTML = "";
            apis.forEach((api, index) => {
                const btn = document.createElement('button');
                btn.className = "server-btn" + (index === currentServerIdx ? " active" : "");
                btn.innerText = api.name;
                btn.onclick = () => { currentServerIdx = index; updatePlayer(); };
                serverList.appendChild(btn);
            });
            let finalUrl = "";
            const api = apis[currentServerIdx];
            if (activeMedia.type === "movie") finalUrl = api.movie + activeMedia.id;
            else finalUrl = (currentServerIdx === 0) ? api.tv + activeMedia.id + `&sea=${currentS}&epi=${currentE}` : api.tv + activeMedia.id + `/${currentS}/${currentE}`;
            player.src = finalUrl;
        }

        function closePlayer() {
            document.getElementById('mainPlayer').src = "";
            document.getElementById('videoPopup').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function handleAuth(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPass').value;
            if (email === "mustafabarbour5@gmail.com" && pass === "Abd120120") {
                currentUser = { name: "Mostafa Barbour", email: email, isOwner: true };
            } else {
                currentUser = { name: "User_" + Math.floor(Math.random() * 9000), email: email, isOwner: false };
            }
            localStorage.setItem('sb_user', JSON.stringify(currentUser));
            location.reload();
        }

        function handleRegister(e) {
            e.preventDefault();
            
            if (!rateLimiter.check('register', 3, 300000)) {
                const msg = currentLanguage === 'ar' 
                    ? 'تم تجاوز عدد المحاولات المسموح بها. حاول مرة أخرى لاحقاً.' 
                    : 'Too many attempts. Please try again later.';
                alert(msg);
                return;
            }
            
            const email = document.getElementById('regEmail').value;
            const pass = document.getElementById('regPass').value;
            const confirm = document.getElementById('regPassConfirm').value;
            
            const botCheck = document.querySelector('input[name="bot_check"]').value;
            const website = document.querySelector('input[name="website"]').value;
            const emailConfirm = document.querySelector('input[name="email_confirm"]').value;
            
            if(botCheck !== "" || website !== "" || emailConfirm !== "") {
                console.log('Bot detected');
                return;
            }
            
            if (pass !== confirm) {
                const msg = currentLanguage === 'ar' ? 'كلمات المرور غير متطابقة!' : 'Passwords do not match!';
                alert(msg);
                return;
            }
            
            const userAnswer = parseInt(document.getElementById('captchaAnswer').value);
            if (userAnswer !== captchaAnswer) {
                const msg = currentLanguage === 'ar' ? 'الإجابة غير صحيحة! حاول مرة أخرى.' : 'Incorrect answer! Try again.';
                alert(msg);
                generateCaptcha();
                document.getElementById('captchaAnswer').value = '';
                return;
            }
            
            document.getElementById('regBtnText').style.display = 'none';
            document.getElementById('regLoader').style.display = 'block';
            
            setTimeout(() => {
                currentOTP = Math.floor(10000 + Math.random() * 90000).toString();
                tempRegData = { email: email };
                
                document.getElementById('registerBox').style.display = 'none';
                document.getElementById('verifyBox').style.display = 'block';
                const msg = currentLanguage === 'ar' 
                    ? `كود التحقق الخاص بك هو: ${currentOTP}`
                    : `Your verification code is: ${currentOTP}`;
                alert(msg);
                resetBtn();
            }, 1000);
        }

        function handleVerification(e) {
            e.preventDefault();
            if (document.getElementById('verifyInput').value === currentOTP) {
                const newMember = currentLanguage === 'ar' ? 'عضو جديد' : 'New Member';
                currentUser = { name: newMember, email: tempRegData.email, isOwner: false };
                localStorage.setItem('sb_user', JSON.stringify(currentUser));
                location.reload();
            } else {
                const msg = currentLanguage === 'ar' ? 'الكود خطأ!' : 'Wrong code!';
                alert(msg);
            }
        }

        function resetBtn() {
            document.getElementById('regBtnText').style.display = 'block';
            document.getElementById('regLoader').style.display = 'none';
        }

        function toggleModal(show) {
            document.getElementById('authModal').style.display = show ? 'flex' : 'none';
            if(show) switchAuthMode('login');
        }

        function switchAuthMode(mode) {
            document.getElementById('loginBox').style.display = mode === 'login' ? 'block' : 'none';
            document.getElementById('registerBox').style.display = mode === 'register' ? 'block' : 'none';
            document.getElementById('verifyBox').style.display = 'none';
            if (mode === 'register') {
                generateCaptcha();
            }
            resetBtn();
        }

        function handleSearch(e) {
            e.preventDefault();
            const query = document.getElementById('globalSearch').value.toLowerCase();
            const resultsGrid = document.getElementById('searchResultsGrid');
            resultsGrid.innerHTML = "";
            const allItems = Object.values(movieData).flat();
            const filtered = allItems.filter(item => item.title.toLowerCase().includes(query));
            filtered.forEach(item => resultsGrid.appendChild(createCard(item)));
            document.getElementById('mainPageBody').style.display = 'none';
            document.getElementById('searchOverlay').style.display = 'block';
        }

        function closeSearch() {
            document.getElementById('searchOverlay').style.display = 'none';
            document.getElementById('mainPageBody').style.display = 'block';
        }

        function openAccount() {
            document.getElementById('mainPageBody').style.display = 'none';
            document.getElementById('accountSection').style.display = 'block';
            document.getElementById('accDisplayName').innerHTML = currentUser.name + (currentUser.isOwner ? ' <i class="fas fa-check-circle verified-badge"></i>' : '');
            document.getElementById('watchStats').innerText = watchCount;
            renderFavorites();
        }

        function closeAccount() {
            document.getElementById('accountSection').style.display = 'none';
            document.getElementById('mainPageBody').style.display = 'block';
        }

        function updateUsername() {
            const newName = document.getElementById('editNameInput').value;
            if(newName.trim() !== "") {
                currentUser.name = newName;
                localStorage.setItem('sb_user', JSON.stringify(currentUser));
                openAccount();
                const msg = currentLanguage === 'ar' ? 'تم تحديث الاسم!' : 'Name updated!';
                alert(msg);
            }
        }

        function logoutUser() { localStorage.removeItem('sb_user'); location.reload(); }
        
        function submitFeedback() {
            const feedback = document.getElementById('feedbackMsg').value;
            if (feedback.trim() === '') {
                const msg = currentLanguage === 'ar' ? 'الرجاء كتابة تقييمك!' : 'Please write your feedback!';
                alert(msg);
                return;
            }
            
            const userName = currentUser ? currentUser.name : (currentLanguage === 'ar' ? 'زائر' : 'Guest');
            addNotification(userName, feedback);
            
            const msg = currentLanguage === 'ar' ? 'تم إرسال تقييمك بنجاح! شكراً لك 🌟' : 'Your feedback has been sent successfully! Thank you 🌟';
            alert(msg);
            document.getElementById('feedbackMsg').value = "";
        }

        function toggleMobileMenu() {
            const navLinks = document.querySelector('.nav-links');
            if (navLinks.style.display === 'flex') {
                navLinks.style.display = 'none';
            } else {
                navLinks.style.display = 'flex';
                navLinks.style.flexDirection = 'column';
                navLinks.style.position = 'absolute';
                navLinks.style.top = '60px';
                navLinks.style.right = '0';
                navLinks.style.background = '#000';
                navLinks.style.padding = '20px';
                navLinks.style.borderRadius = '8px';
            }
        }

        initApp();
    </script>
</body>
</html>
